<input type="hidden" id="is_atdd" value="1"/>
<%= @htmlrepertoire %>
<form id="formpaste" action="../tests/pasteatddelement" method="post">
	<input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
	<input type="hidden"  id="folder_id_destination" name="folder_id" value=""/>
	<input type="hidden"  id="test_or_folder_to_paste" name="test_or_folder_to_paste" value=""/>
	<input type='hidden' name="popup" value="<%=@popup%>"/>
	<input type='hidden' name="testtype" value="<%=@testtype%>"/>
	<input type="hidden" name="test_id" id="test_id" value="<%= @test_id %>"/>
	<input type="hidden" name="write" id="write" value="<%= @modmodif  %>"/>
	<input type="hidden" name="lock" id="lock" value="<%= @testLocked  %>"/>
	<input type="hidden" name="load" value="1"/>
	<input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
	<input type="hidden" name="screen" value="edit"/>
</form>
<form id="formaddatddsubfolder" action="../tests/addsubatddfolder" method="post">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="showtestid" id="showtestid" value="<% if @test != nil %><%= @test.id %><% end %>"/>
  <input type="hidden" name="folder" id="ffolder" value=""/>
  <input type='hidden' name="popup" value="<%=@popup%>"/>
  <input type="hidden" name="test_id" id="test_id" value="<%= @test_id %>"/>
  <input type="hidden" name="write" id="write" value="<%= @modmodif  %>"/>
  <input type="hidden" name="lock" id="lock" value="<%= @testLocked  %>"/>
  <input type="hidden" name="load" value="1"/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
  <input type="hidden" name="back_to_id" value="showtestid=<%=@test_id%>"/>
  <input type="hidden" name="screen" value="edit"/>
</form>

<form id="formaddatddsteptest" action="../tests/addatddsteptest" method="post">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="showtestid" id="showtestid" value="<% if @test != nil %><%= @test.id %><% end %>"/>
  <input type="hidden" name="folder" id="tfolder" value=""/>
  <input type='hidden' name="popup" value="<%=@popup%>"/>
  <input type='hidden' name="testtype" value="<%=@testtype%>"/>
  <input type="hidden" name="test_id" id="test_id" value="<%= @test_id %>"/>
  <input type="hidden" name="write" id="write" value="<%= @modmodif  %>"/>
  <input type="hidden" name="lock" id="lock" value="<%= @testLocked  %>"/>
  <input type="hidden" name="load" value="1"/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
  <input type="hidden" id="convertasstep" name="cvtstep" value=""/>
  <input type="hidden" name="back_to_id" value="showtestid=<%=@test_id%>"/>
  <input type="hidden" name="screen" value="edit"/>
</form>

<form id="formvalidarrayatdd" action="../teststeps/validarrayatdd" method="post">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="showtestid" id="showtestid" value="<% if @test != nil %><%= @test.id %><% end %>"/>
  <input type='hidden' name="popup" value="<%=@popup%>"/>
  <input type='hidden' name="testtype" value="<%=@testtype%>"/>
  <input type="hidden" name="test_id" id="test_id" value="<%= @test_id %>"/>
  <input type="hidden" name="write" id="write" value="<%= @modmodif  %>"/>
  <input type="hidden" name="lock" id="lock" value="<%= @testLocked  %>"/>
  <input type="hidden" name="load" value="1"/>
  <input type="hidden" id="arraystep" name="arraystep" value=""/>
  <input type="hidden" name="back_to_id" value="showtestid=<%=@test_id%>"/>
</form>


<form id="formrenamefolder" action="../tests/rename" method="post" target="hiddenFrameNoLoad">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="rfolder" id="rfolder" value=""/>
  <input type="hidden" name="rfoldername" id="rfoldername" value=""/>
  <input type="hidden" name="what" id="what" value="folder"/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
</form>

<form id="formrenametest" action="../tests/rename" method="post" target="hiddenFrameNoLoad">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="rtest" id="rtest" value=""/>
  <input type="hidden" name="rtestname" id="rtestname" value=""/>
  <input type="hidden" name="what" id="what" value="test"/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
</form>

<form id="formdelete" action="../tests/delete" method="post" target="hiddenFrameMsg">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="idtodel" id="idtodel" value=""/>
  <input type="hidden" name="delwhat" id="delwhat" value="test"/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
</form>

<form id="formvaloatddparam" action="../teststeps/changeparamatddvalue" method="post" target="hiddenFrameNoLoad">
  <input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
  <input type="hidden" name="stepid" id="idatddstepmod" value=""/>
  <input type="hidden" name="pname" id="atddstepparam" value=""/>
  <input type="hidden" name="pvalue" id="atddstepparamvalue" value=""/>
  <input type="hidden" name="atddsteps" value="<%=@atddsteps%>"/>
</form>

<script type="application/javascript">
	openfolder = localStorage.getItem("alfyftatddtestrepertoiredisplayed");
	if (openfolder == null) {localStorage.setItem("alfyftatddtestrepertoiredisplayed","");openfolder = localStorage.getItem("alfyftatddtestrepertoiredisplayed");}
	<% if @atddstep != nil %>
		sheetname = document.getElementById('spant<%= @atddstep.id %>').parentNode.parentNode.getAttribute("name");
		openfolder = openfolder.replace("$" + sheetname + "$","");
		openfolder += "$" + sheetname + "$";
	<% end %>
	topenfolder = openfolder.split("$$");
	for (i=0;i<topenfolder.length;i++) {
		element = topenfolder[i].replace("$","").replace("$","");
		elements = document.getElementsByName(element);
		for (j=0;j<elements.length;j++) {
			elements[j].style.display='block';
		}
		if (document.getElementById("signe"+element)!=null) {
			document.getElementById("signe"+element).innerHTML="<b>-&nbsp;&nbsp;</b>";
		}
	}

	if (getCookie("atdd_test_or_folder_to_paste") != "") {
		elements = document.getElementsByName('btnpaste');
		for (i=0;i<elements.length;i++) {
			elements[i].style.display = 'inline';
		}
	}
</script>