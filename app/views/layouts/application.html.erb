
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <% if session[:uid] != nil %>
      <%= javascript_include_tag "ace.js" %>
      <%= stylesheet_link_tag "trix.css" %>
      <%= javascript_include_tag "trix.js" %>
      <%= javascript_include_tag "nicEdit.js" %>
      <%= javascript_include_tag "ext-language_tools.js" %>
      <%= javascript_include_tag "mode-gherkin.js" %>
      <%= javascript_include_tag "mode-ruby.js" %>
      <%= javascript_include_tag "theme-tomorrow_night.js" %>
      <%= javascript_include_tag "snippets/gherkin.js" %>
      <%= javascript_include_tag "snippets/ruby.js" %>
    <% end %>
	<% if @hors_appli or session[:uid] == nil or @donotshowmenu != nil %>
		<%= stylesheet_link_tag "app.css" %>
	<% end%>
	<% if @controller == "fiches" %>
	  <meta http-equiv="cache-control" content="no-cache, must-revalidate, post-check=0, pre-check=0" />
	  <meta http-equiv="cache-control" content="max-age=0" />
	  <meta http-equiv="expires" content="0" />
	  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	  <meta http-equiv="pragma" content="no-cache" />
	<% end %>
	<%= csrf_meta_tags %>
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => 'reload' %>
	<%= javascript_include_tag 'application', 'data-turbolinks-track' => 'reload' %>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    </head>

    <body <% if @hors_appli or session[:uid] == nil or @donotshowmenu != nil %>class="body-login"<%end%>>
		<%= render :partial => 'layouts/loginbandeau' %>
		<%= render :partial => 'layouts/loader' %>
 		<%= render :partial => 'layouts/bandeau' %>
		<%= render :partial => 'layouts/message' %>
		<%= render :partial => 'layouts/notification' %>

		<%= yield %>

<script>
  lssizeleft = localStorage.getItem("alfyftsizeleft");
  if (lssizeleft == null) {
	localStorage.setItem("alfyftsizeleft","");
	lssizeleft = localStorage.getItem("alfyftsizeleft");
  } else {
	if (lssizeleft != "") {
		sizeleft = lssizeleft;
		if (document.getElementById("left")) {
			document.getElementById("left").style.width = sizeleft + 'px';
		}
		if (document.getElementById("right")) {
			document.getElementById("right").style.width = "calc(100% - " + sizeleft + 'px)';
		}
		if (document.getElementById("btnresize")) {
			document.getElementById("btnresize").style.left = (parseInt(sizeleft) ) + 'px';
		}
	}
	}
  setTimeout(function () {
	  elem = document.getElementById('idspanmessage');
	  if (elem != null) {
		  elem.parentNode.removeChild(elem);
	  }
  }, 3000);
</script>
<% if @hors_appli or session[:uid] == nil or @donotshowmenu != nil %>
 <%= javascript_include_tag "jquery.min.js" %>
 <%= javascript_include_tag "browser.min.js" %>
 <%= javascript_include_tag "breakpoints.min.js" %>
 <%= javascript_include_tag "util.js" %>
 <%= javascript_include_tag "main.js" %>
<% end %>
</body>
</html>
